<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Memory Game with Countdown Timer</title>
    <style>
      /* CSS Reset - removes default browser styling */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      /* Main page background with gradient */
      body {
        background: linear-gradient(135deg, #5c4033 0%, #a0522d 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      /* Game container styling */
      .container {
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        width: 100%;
        max-width: 600px;
        padding: 25px;
        text-align: center;
      }

      /* Game title styling */
      h1 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 2.2rem;
      }

      /* Game info panel (timer, moves, matches) */
      .game-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        background-color: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      /* Individual info boxes styling */
      .info-box {
        flex: 1;
        padding: 10px;
      }

      .info-box h3 {
        color: #3498db;
        margin-bottom: 5px;
        font-size: 1rem;
      }

      .info-box p {
        font-size: 1.5rem;
        font-weight: bold;
        color: #2c3e50;
      }

      /* Timer specific styling - red color for urgency */
      .timer {
        color: #e74c3c;
      }

      /* Game board grid layout for cards */
      .game-board {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
        margin-bottom: 20px;
      }

      /* Card styling with 3D flip effect */
      .card {
        height: 100px;
        background-color: #dba6349f;
        border-radius: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        color: white;
        cursor: pointer;
        transition: transform 0.3s, background-color 0.3s;
        transform-style: preserve-3d; /* Enables 3D transformations */
        position: relative;
      }

      /* Flipped card state - rotates 180 degrees */
      .card.flipped {
        transform: rotateY(180deg);
        background-color: #a0522d;
      }

      /* Matched card state - slightly scaled down */
      .card.matched {
        background-color: #c9cc2e;
        transform: rotateY(180deg) scale(0.95);
        cursor: default; /* Disables clicking on matched cards */
      }

      /* Front and back faces of the card */
      .card .front,
      .card .back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden; /* Hides the back face when rotated */
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 8px;
      }

      /* Front face styling (shows question mark/flag) */
      .card .front {
        background-color: #ffbb279c;
      }

      /* Back face styling (shows Baybayin character) */
      .card .back {
        background-color: #a0522d;
        transform: rotateY(180deg); /* Initially rotated to be hidden */
      }

      /* Control buttons container */
      .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
      }

      /* Button base styling */
      button {
        padding: 12px 25px;
        border: none;
        border-radius: 50px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      /* Start button specific styling */
      #start-btn {
        background-color: #2ecc71;
        color: white;
      }

      #start-btn:hover {
        background-color: #27ae60;
        transform: translateY(-3px);
      }

      /* Reset button specific styling */
      #reset-btn {
        background-color: #e74c3c;
        color: white;
      }

      #reset-btn:hover {
        background-color: #c0392b;
        transform: translateY(-3px);
      }

      /* Disabled button styling */
      button:disabled {
        background-color: #bdc3c7;
        cursor: not-allowed;
        transform: none;
      }

      /* Message display area */
      .message {
        margin-top: 20px;
        padding: 15px;
        border-radius: 10px;
        font-weight: bold;
        font-size: 1.2rem;
        display: none; /* Hidden by default */
      }

      /* Win message styling with pulsing animation */
      .win {
        background-color: #2ecc71;
        color: white;
        display: block;
        animation: pulse 1.5s infinite;
      }

      /* Lose message styling */
      .lose {
        background-color: #e74c3c;
        color: white;
        display: block;
      }

      /* Pulsing animation for win state */
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      /* Responsive design for mobile devices */
      @media (max-width: 500px) {
        .game-board {
          grid-template-columns: repeat(4, 1fr); /* 3 columns on mobile */
        }

        .card {
          height: 80px; /* Smaller cards on mobile */
        }

        h1 {
          font-size: 1.8rem; /* Smaller title on mobile */
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Baybayin Memory Match</h1>

      <!-- Game statistics display -->
      <div class="game-info">
        <div class="info-box">
          <h3>TIME LEFT</h3>
          <p class="timer" id="timer">60s</p>
        </div>
        <div class="info-box">
          <h3>MOVES</h3>
          <p id="moves">0</p>
        </div>
        <div class="info-box">
          <h3>MATCHES</h3>
          <p id="matches">0/8</p>
        </div>
      </div>

      <!-- Game board where cards will be dynamically inserted -->
      <div class="game-board" id="game-board">
        <!-- Cards will be generated by JavaScript -->
      </div>

      <!-- Game control buttons -->
      <div class="controls">
        <button id="start-btn">Start Game</button>
        <button id="reset-btn" disabled>Reset Game</button>
      </div>

      <!-- Message display for win/lose states -->
      <div class="message" id="message"></div>
    </div>

    <script>
      // Wait for DOM to be fully loaded before executing script
      document.addEventListener("DOMContentLoaded", () => {
        // Get references to DOM elements
        const gameBoard = document.getElementById("game-board");
        const timerDisplay = document.getElementById("timer");
        const movesDisplay = document.getElementById("moves");
        const matchesDisplay = document.getElementById("matches");
        const startBtn = document.getElementById("start-btn");
        const resetBtn = document.getElementById("reset-btn");
        const messageDisplay = document.getElementById("message");

        // Game state variables
        let cards = []; // Array to store all card elements
        let flippedCards = []; // Array to track currently flipped cards
        let matchedPairs = 0; // Counter for matched pairs
        let moves = 0; // Counter for player moves
        let timer; // Reference to the timer interval
        let timeLeft = 60; // Game duration in seconds
        let gameStarted = false; // Flag to track if game is active
        let canFlip = false; // Flag to control when cards can be flipped

        // Baybayin characters used in the game (8 pairs)
        const cardSymbols = ["ᜀ", "ᜁ", "ᜋ", "ᜃ", "ᜄ", "ᜅ", "ᜆ", "ᜇ"];

        /**
         * INITIALIZE GAME
         * Sets up the game board with shuffled cards and resets all game state
         */
        function initGame() {
          // Create card pairs by duplicating the symbols array
          const gameCards = [...cardSymbols, ...cardSymbols];

          // Shuffle the cards for random placement
          shuffleArray(gameCards);

          // Clear any existing cards from the game board
          gameBoard.innerHTML = "";

          // Create and append card elements to the game board
          gameCards.forEach((symbol, index) => {
            const card = document.createElement("div");
            card.className = "card";
            card.dataset.symbol = symbol; // Store symbol in data attribute
            card.dataset.index = index; // Store index in data attribute

            // Create front face of card (shows flag)
            const front = document.createElement("div");
            front.className = "front";
            front.innerHTML =
              '<img src="https://upload.wikimedia.org/wikipedia/commons/9/99/Flag_of_the_Philippines.svg" alt="Philippine Flag" style="width: 40px; height: auto;" />';

            // Create back face of card (shows Baybayin character)
            const back = document.createElement("div");
            back.className = "back";
            back.textContent = symbol;

            // Append faces to card and card to game board
            card.appendChild(front);
            card.appendChild(back);

            // Add click event listener to handle card flipping
            card.addEventListener("click", () => flipCard(card));
            gameBoard.appendChild(card);
          });

          // Reset game state variables
          cards = Array.from(document.querySelectorAll(".card"));
          flippedCards = [];
          matchedPairs = 0;
          moves = 0;
          timeLeft = 60;

          // Update UI displays with initial values
          movesDisplay.textContent = moves;
          matchesDisplay.textContent = `${matchedPairs}/8`;
          timerDisplay.textContent = `${timeLeft}s`;

          // Reset UI elements
          messageDisplay.className = "message";
          messageDisplay.textContent = "";
          startBtn.disabled = false;
          resetBtn.disabled = true;
          canFlip = false;
          gameStarted = false;

          // Clear any existing timer to prevent multiple timers running
          if (timer) {
            clearInterval(timer);
          }
        }

        /**
         * SHUFFLE ARRAY
         * Randomly shuffles an array using Fisher-Yates algorithm
         * @param {Array} array - The array to shuffle
         * @returns {Array} - The shuffled array
         */
        function shuffleArray(array) {
          for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]]; // Swap elements
          }
          return array;
        }

        /**
         * START GAME
         * Begins the game by starting the timer and enabling card flipping
         */
        function startGame() {
          if (gameStarted) return; // Prevent multiple starts

          gameStarted = true;
          canFlip = true;
          startBtn.disabled = true;
          resetBtn.disabled = false;

          // Start countdown timer that updates every second
          timer = setInterval(() => {
            timeLeft--;
            timerDisplay.textContent = `${timeLeft}s`;

            // End game if time runs out
            if (timeLeft <= 0) {
              endGame(false);
            }
          }, 1000);
        }

        /**
         * FLIP CARD
         * Handles the card flipping logic and match checking
         * @param {HTMLElement} card - The card element that was clicked
         */
        function flipCard(card) {
          // Check if card can be flipped (game active, card not already flipped/matched)
          if (
            !canFlip ||
            card.classList.contains("flipped") ||
            card.classList.contains("matched")
          ) {
            return;
          }

          // Flip the card and add to flipped cards array
          card.classList.add("flipped");
          flippedCards.push(card);

          // Check for match when two cards are flipped
          if (flippedCards.length === 2) {
            moves++;
            movesDisplay.textContent = moves;
            canFlip = false; // Prevent further flipping during match check

            const card1 = flippedCards[0];
            const card2 = flippedCards[1];

            // Check if symbols match
            if (card1.dataset.symbol === card2.dataset.symbol) {
              // Match found - mark cards as matched
              card1.classList.add("matched");
              card2.classList.add("matched");
              flippedCards = [];
              matchedPairs++;
              matchesDisplay.textContent = `${matchedPairs}/8`;
              canFlip = true;

              // Check if all pairs have been matched (win condition)
              if (matchedPairs === 8) {
                endGame(true);
              }
            } else {
              // No match - flip cards back after delay
              setTimeout(() => {
                card1.classList.remove("flipped");
                card2.classList.remove("flipped");
                flippedCards = [];
                canFlip = true;
              }, 1000);
            }
          }
        }

        /**
         * END GAME
         * Handles game conclusion (win or lose)
         * @param {boolean} isWin - True if player won, false if time ran out
         */
        function endGame(isWin) {
          clearInterval(timer); // Stop the timer
          canFlip = false; // Disable card flipping

          // Display appropriate message based on game outcome
          if (isWin) {
            messageDisplay.textContent = `Congratulations! You won in ${moves} moves with ${timeLeft} seconds left!`;
            messageDisplay.className = "message win";
          } else {
            messageDisplay.textContent = "Time's up! Try again.";
            messageDisplay.className = "message lose";
          }
        }

        // EVENT LISTENERS
        startBtn.addEventListener("click", startGame);
        resetBtn.addEventListener("click", initGame);

        // Initialize the game when page loads
        initGame();
      });
    </script>
  </body>
</html>

